# ==================== halt system =============================================

shutdown -h now                 # Остановить систему
shutdown -h hours:minutes &     # запланировать остановку системы
shutdown -c                     # отменить запланированную остановку системы
shutdown -r now                 # перегрузить систему
pm-hibernate                    # гибернация
logout 	                        # выйти из сеанса
Alt + Ctrl + F1-F7              # переключение между консолями
Alt + Ctrl + t                  # terminal
kill pid                        # удалить процесс
Ctrl + z                        # команда в сон
fg                              # вернутся к команду вл сне

# ==================== help ====================================================

man | man -k                    # справка по команде | поиск команд по слову
TAB                             # автодополнение команды
2TAB(двойной таб)               # список всех команд на введеные буквы
Ctrl + Shift + c                # копирование в буфер
Ctrl + Shift + v                # вставка из буфера
Ctrl + l                        # очистка shell
Ctrl + a                        # переход в начало строки
Ctrl + u                        # удаляет символы слева от курс. до нач. строки
Ctrl + e                        # переход к концу строки		
Ctrl + k					    # удаляет символы справа от курс. до кон. строки
sudo !!                         # повтор последней команды
!77                             # исполнение команды 77 в .bash_history
!cat                            # последнее исполнение команды cat
Ctrl + r                        # поиск в истории команд
Ctrl + j                        # скопировать найденую команду для ред-ия
echo $?                         # вывести return код последней команды

# ==================== System info =============================================

top
    Shift+p                     # отсортировать по cpu
    Shift+m                     # отсортировать по памяти
    i                           # оставить активные
ps
    -u                          # процессы заданного пользователя
    ax                          # все процессы
dmesg
journalctl
dmidecode                       # информация о железе
uptime                          # показать текущий аптайм
id                              # инфо о пользователе
uname -a                        # показать информацию о ядре
df -h                           # показать инф. о использовании дисков
df -i                           # показать инф. о использовании inode
du -h                           # вывести размер текущего каталога
du -s                           # общяя суммирование 
free -h                         # использование памяти и swap

# ==================== web =====================================================

wget -r site                    # загружает рекурсивно содержимое сайта
wget -c site/file.iso           # загрузить файл с возможностью start/stop

echo 'wget -c site/files.iso' | at 09:00    
                                # начать закачку в указанное время

# ==================== permissions =============================================

chmod                           # изменить права доступа к файлу или директории
    $ chmod 777 file.txt        # установить все права файлу file.txt
        user u+x                # выполняемый
        group g+w               # разрешение на запись
        others o+x              # разрешение на выполнение
        all a+r | =r            # разрешение всем на чтение
    $ chmod =wrx,g-wx,o-wx      # все разрешения и только группе и остальным 
                                # на чтение

chown                           # изменить владельца файла или директории
$ chown user:group file.txt     # сменить владельца и группу

# ==================== directory ===============================================

cd                              # переход по директориям
    $ cd -                      # меняет коталог на предыдущий

pushd                           # сменить дир-ю с сох-ем в стек
popd                            # сменить дир-ию на верхнюю из стека и удалить
dirs                            # показать стек директорий

pwd                             # вывести путь текущей директории
ls                              # список содержимого в директории
    -i inode - номер файла

mkdir                           # создать директорию
$ mkdir -pv www/http/{style,js,images}   
                                # создать с подпапками и вывести
            -v                  # подробный вывод
rmdir                           # удалить директорию
(cd /tmp && ls)                 # перейти к директории, выполнить там команду, 
                                # вернуться к предыдущей директории.

# ==================== files ===================================================

ls
    ls -lh                      # список файлов в более понятном виде 
    ls -R                       # список файлов рекурсивно
$ ls /dir | sort | less         # вывести отсортированый список постранично
          | uniq                # поиск и удаление повторяющихся строк
          | uniq -d             # получение дубликатов строк
sort                            # сортировать
uniq                            # удалить повторяющиеся строки
wc                              # вывод числа строк, слов и байтов
tee                             # вывод в консоль и запись в файл
more                            # построничный вывод содержимого файла
wc -l                           # подсчитать строки

cat                             # вывод содержимого одного или нескольких файлов
    -d "-" -f 3                 # разделить фыйл по "-" вывести 3 столбец
    -n                          # нумерация строк
    -s                          # пропускать пустые строки
$ cat syslog > file.txt         # перенаправить вывод cat в файл file.txt
    >                           # вывод из strout потока в файл или создает
    >>                          # вывод из strout потока в файл или создает
    <                           # отпр. содержимого файла на strin ввод прогр.
    2>&1 | &>                   # пере-ие станд. вывода и вывода ошибок в файл
    >&                          # пере-ие станд. вывода и ошибок в друг друга
    >|                          # принудительное перенаправление
    |                           # конвейеры
    &                           # выполнение в фоне
        
    $ cat file | tail -n 3      # вывести из файла три последних строки 
               | tail -f        # выводит новые троки после появления их в файле   
    $ cat file | head -n 3      # вывести из файла три первые строки 
    
less                            # построчный вывод содержимого файла
    -N                          # нумерация строк
    /                           # поиск
    n                           # поиск далее
    G                           # в конец файла
    g                           # в начало файла
    h                           # помощь
    q                           # выход

[групповые символы]
*.txt                           # все файлы txt
g*                              # все ф-лы начинащиеся с g
data???                         # все ф-лы нач-ся с data, за которыми 3 люб.сим.
[abc]*                          # все ф-лы нач-ся с символа a or b or c
data.[0-9][0-9][0-9]            # все ф-лы data за которыми следует 3 цыфры
[[:upper:]]*                    # все ф-лы с Заглавной буквы
[![:digit:]]*                   # все ф-лы не нач-ся с цыфр
*[[:lower:]123]                 # все ф-лы заканч. букву в ниж. регистре или цыф

Attributes cp mv 
    -a --archive                # коп-ть со всеми атрибутами и правами
    -i --interactive            # запришивать подтверждения
    -u --update                 # коп-ть более новые или которых нет
    -v --verbose                # вывод инфо в процессе
    -r --recursive              # коп-ть рекурсивно
    -p --preserve               # коп-ть с сохранением прав
cp                              # копирование файла
    echo ~/dir/ ~/Dir /diR | xargs -n 1 cp -n ~/file.txt 
                                # коп-ть файл в несколько мест


mv                              # перемещение или переименование файла
    $ mv re{a,}n{e,a}me.t{t,x}t # переименновать reaneme.ttt в rename.txt
    $ mv folder/*/*.jpg ./      # перенести файлы .jpg в текущюю папку     

rm                              # удаление файла
    -rf                         # удаление всех файлов рекурсивно
    -f --force                  # не запрашивать поддтверждения удалять все


pgrep apache                    # поиск в процессах
egrep -v '^(#|$)'               # исключить из выбора строчки начинающиеся 
                                # с # или пустые

grep -r "str" /home             # найти подстроку
    -E                          # Регулярное выражение
    -i | --ignore-case          # игнорировать регистр
    -v | --invert-match         # Инвертировать вывод 
    -c | --count                # Вывести число совпадений
    -l | --files-with-matches   # без искомых строк выводить имена файлов
    -L | --files-without-matches# выводит только имена файлов, где нет совп-ии
    -n | --line-number          # В начале каждой стр-и вывести ее номер в файле
    -h | --no-filename          # Подавить вывод имен файлов
    -r | --recursive            # Искать строку в файлах рекурсивно 
                                


type                            # тип команды
whereis bash                    # найти местоположение испол-ого файла команды
whatis                          # вывод краткого описания команды
alias foo='cd /home; ls; cd -'  # создать alias
unalias foo                     # удалить alias


# ==================== DEB package APT install =================================
add-apt-repository              # добавить репозиторий
        
apt-cache search                # поиск по кешу APT.

apt-get install
    -f                          # устранение сбоев
    -u                          # показать список обновляемых пакетов
    -y                          # отвечать yes не замедлительно
    -d                          # скачать, но не установливать
    
update                          # получить обновлённые списки пакетов
upgrade                         # обновить установленные пакеты
dselect-upgrade                 # помогает выбирать пакеты для установки
full-upgrade                    # обновить установленные пакеты
remove                          # удалить пакет с зависимостями
autoremove                      # удалить пакеты без зависимостей
purge | --purge                 # удалить пакет, с удалением файлов конфигурации
check                           # проверить целостность зависимостей
clean                           # удалить загруженные архивные файлы пакетов
search                          # поиск в пакетах и описании репозиториев
list -a                         # показыввать версии установленных пакетов
autoclean                       # удалить старые архивные файлы пакетов
source                          # Получение исходных текстов пакета
dist-upgrade                    # Обновление дистрибутива 
depends                         # вывести зависимых пакетов для данного пакета
rdepends                        # вывести список пакетов зависимых от пакета
build-dep                       # Получение зависимостей для сборки пакета

dpkg -i package.deb             # установить / обновить пакет
dpkg -r package.deb             # удалить пакет
dpkg -l | -l 'name'             # список установленных пакетов
dpkg -L package name            # содержимое пакета
dpkg-query                      # информация о пакете

# ==================== cdrom & iso to flash drive ==============================

mount                           # команда монтирования
mount -o loop file.iso /mnt/iso # монтирование iso образа
mount -t ntfs-3g -o rw /dev/sdx /media/disk 
                                # монтирование ntfs диска
mount.cifs -o username=guest,password="" //rt-n56u/500_G /media/smb
                                # монтирование samba net 
umount                          
    $ umount -R /mnt/           # размонтирование

dd status=progress bs=4M if=disk.iso of=/dev/sdc && sync
                                # запись образа на флешку

# ============================== users and password ============================

id                              # инфо о пользователе
who | w                         # кто в системе
whoami | echo $USER             # кто я
useradd                         # добавления поль-ля
chfn -f "Joe Blow" user         # добовление полного имени поль-ля
passwd username                 # добавления пароля для поль-ля
userdel -r username
usermod                         # изменить учетную запись пользователя
    usermod -a -G group user    # добовление поль-ля в группу 

adduser | useradd               # добовление поль-ля
# useradd -m -d /home/username -g groups -G wheel -s /bin/bash username
----------------------------
  -m(create home dir) -d(change home dir) -s(change shell) -g(add user in group)
                                                           -G(add group)
----------------------------
    $adduser $user $group       # добовление поль-ля в группу

addgroup | newgrp               # создание новой группы
chage                           # выбор срока смены пароля поль-ля

# =================================== Make =====================================

./configure --help              # получить справку
./configure --prefix=/opt/name  # указать место сборки 

make                            # для компиляции введите
make install                    # установка скомпилированных файлов
make revert                     # отменить обновление ранее установленной 
                                # программы и вернутся к старой версии файлов
make uninstall                  # удаление


# ================ start 2016 ============== end 23-01-2017 ====================